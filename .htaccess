# Forzar index.html como archivo predeterminado
DirectoryIndex index.html index.htm

# Deshabilitar listado de directorios
Options -Indexes

# Tipos MIME
AddType text/html .html
AddType text/css .css
AddType application/javascript .js
AddType image/jpeg .jpg .jpeg
AddType image/png .png
AddType image/webp .webp
AddType image/svg+xml .svg

# Habilitar compresi√≥n
<IfModule mod_deflate.c>
  AddOutputFilterByType DEFLATE text/html text/css application/javascript application/json image/svg+xml
</IfModule>

# Cache control - IMPORTANTE: Headers anti-cache para HTML
<IfModule mod_headers.c>
  # No cachear HTML
  <FilesMatch "\.(html|htm)$">
    Header set Cache-Control "no-cache, no-store, must-revalidate"
    Header set Pragma "no-cache"
    Header set Expires "0"
  </FilesMatch>
  
  # Cache largo para assets con hash
  <FilesMatch "\.(css|js|jpg|jpeg|png|gif|webp|woff|woff2|ttf|svg|ico)$">
    Header set Cache-Control "public, max-age=31536000, immutable"
  </FilesMatch>
  
  # CORS
  Header set Access-Control-Allow-Origin "*"
  
  # Seguridad
  Header set X-Content-Type-Options "nosniff"
  Header set X-Frame-Options "SAMEORIGIN"
</IfModule>

# Rewrite rules para SPA/static site
<IfModule mod_rewrite.c>
  RewriteEngine On
  RewriteBase /
  
  # No reescribir archivos/directorios que existen
  RewriteCond %{REQUEST_FILENAME} !-f
  RewriteCond %{REQUEST_FILENAME} !-d
  
  # Redirigir todo a index.html (para rutas limpias)
  # RewriteRule . /index.html [L]
</IfModule>

# Prevenir acceso a archivos sensibles
<FilesMatch "^\.(htaccess|htpasswd|env|git)$">
  Require all denied
</FilesMatch>
